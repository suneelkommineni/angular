!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-slimscroll",["exports","@angular/core","@angular/common","rxjs","rxjs/operators"],e):e(t["ngx-slimscroll"]={},t.ng.core,t.ng.common,t.rxjs,t.rxjs.operators)}(this,function(t,n,e,p,c){"use strict";var i=function(t){this.type=t.type,this.y=t&&t.y?t.y:0,this.percent=t&&t.percent?t.percent:0,this.duration=t&&t.duration?t.duration:0,this.easing=t&&t.easing?t.easing:"linear"},r=new n.InjectionToken("NGX_SLIMSCROLL_DEFAULTS"),s=function(){function i(t){this.position=t&&t.position?t.position:"right",this.barBackground=t&&t.barBackground?t.barBackground:"#343a40",this.barOpacity=t&&t.barOpacity?t.barOpacity:"1",this.barWidth=t&&t.barWidth?t.barWidth:"12",this.barBorderRadius=t&&t.barBorderRadius?t.barBorderRadius:"5",this.barMargin=t&&t.barMargin?t.barMargin:"1px 0",this.gridBackground=t&&t.gridBackground?t.gridBackground:"#adb5bd",this.gridOpacity=t&&t.gridOpacity?t.gridOpacity:"1",this.gridWidth=t&&t.gridWidth?t.gridWidth:"8",this.gridBorderRadius=t&&t.gridBorderRadius?t.gridBorderRadius:"10",this.gridMargin=t&&t.gridMargin?t.gridMargin:"1px 2px",this.alwaysVisible=!t||"undefined"==typeof t.alwaysVisible||t.alwaysVisible,this.visibleTimeout=t&&t.visibleTimeout?t.visibleTimeout:1e3}return i.prototype.merge=function(t){var e=new i;return e.position=t&&t.position?t.position:this.position,e.barBackground=t&&t.barBackground?t.barBackground:this.barBackground,e.barOpacity=t&&t.barOpacity?t.barOpacity:this.barOpacity,e.barWidth=t&&t.barWidth?t.barWidth:this.barWidth,e.barBorderRadius=t&&t.barBorderRadius?t.barBorderRadius:this.barBorderRadius,e.barMargin=t&&t.barMargin?t.barMargin:this.barMargin,e.gridBackground=t&&t.gridBackground?t.gridBackground:this.gridBackground,e.gridOpacity=t&&t.gridOpacity?t.gridOpacity:this.gridBackground,e.gridWidth=t&&t.gridWidth?t.gridWidth:this.gridWidth,e.gridBorderRadius=t&&t.gridBorderRadius?t.gridBorderRadius:this.gridBorderRadius,e.gridMargin=t&&t.gridMargin?t.gridMargin:this.gridMargin,e.alwaysVisible=t&&"undefined"!=typeof t.alwaysVisible?t.alwaysVisible:this.alwaysVisible,e.visibleTimeout=t&&t.visibleTimeout?t.visibleTimeout:this.visibleTimeout,e},i}();function o(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,s=i.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(r=s.next()).done;)o.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=s["return"])&&i.call(s)}finally{if(n)throw n.error}}return o}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}var y=function(t){this.scrollPosition=t&&t.scrollPosition?t.scrollPosition:0,this.isScrollAtStart=!t||"undefined"==typeof t.isScrollAtStart||t.isScrollAtStart,this.isScrollAtEnd=!(!t||"undefined"==typeof t.isScrollAtEnd)&&t.isScrollAtEnd},m={linear:function(t){return t},inQuad:function(t){return t*t},outQuad:function(t){return t*(2-t)},inOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1- --t*t*t*t},inOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return 1+--t*t*t*t*t},inOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},a=function(){function t(t,e,i,r){var u=this;this.viewContainer=t,this.renderer=e,this.document=i,this.optionsDefaults=r,this.enabled=!0,this.scrollChanged=new n.EventEmitter,this.barVisibilityChange=new n.EventEmitter,this.initWheel=function(){var t=p.fromEvent(u.el,"DOMMouseScroll"),e=p.fromEvent(u.el,"mousewheel"),i=p.merge.apply(void 0,g([t,e])).subscribe(function(t){var e=0;t.wheelDelta&&(e=-t.wheelDelta/120),t.detail&&(e=t.detail/3),u.scrollContent(e,!0,!1),t.preventDefault&&t.preventDefault()});u.interactionSubscriptions.add(i)},this.initDrag=function(){var e=u.bar,i=p.fromEvent(u.document.documentElement,"mousemove"),r=p.fromEvent(u.document.documentElement,"touchmove"),t=p.fromEvent(e,"mousedown"),n=p.fromEvent(u.el,"touchstart"),s=p.fromEvent(u.document.documentElement,"mouseup"),o=p.fromEvent(u.document.documentElement,"touchend"),a=t.pipe(c.mergeMap(function(t){return u.pageY=t.pageY,u.top=parseFloat(getComputedStyle(e).top),i.pipe(c.map(function(t){return t.preventDefault(),u.top+t.pageY-u.pageY}),c.takeUntil(s))})),l=n.pipe(c.mergeMap(function(t){return u.pageY=t.targetTouches[0].pageY,u.top=-parseFloat(getComputedStyle(e).top),r.pipe(c.map(function(t){return-(u.top+t.targetTouches[0].pageY-u.pageY)}),c.takeUntil(o))})),d=p.merge.apply(void 0,g([a,l])).subscribe(function(t){u.body.addEventListener("selectstart",u.preventDefaultEvent,!1),u.renderer.setStyle(u.body,"touch-action","pan-y"),u.renderer.setStyle(u.body,"user-select","none"),u.renderer.setStyle(u.bar,"top",t+"px");var e=u.scrollContent(0,!0,!1),i=u.el.offsetHeight-u.bar.offsetHeight;e&&e<0&&-e<=i?u.renderer.setStyle(u.el,"paddingTop",-e+"px"):e&&0<e&&e<=i&&u.renderer.setStyle(u.el,"paddingBottom",e+"px")}),h=p.merge.apply(void 0,g([s,o])).subscribe(function(){u.body.removeEventListener("selectstart",u.preventDefaultEvent,!1);var t=parseInt(u.el.style.paddingTop,10),e=parseInt(u.el.style.paddingBottom,10);u.renderer.setStyle(u.body,"touch-action","unset"),u.renderer.setStyle(u.body,"user-select","default"),0<t?u.scrollTo(0,300,"linear"):0<e&&u.scrollTo(0,300,"linear")});u.interactionSubscriptions.add(d),u.interactionSubscriptions.add(h)},this.preventDefaultEvent=function(t){t.preventDefault(),t.stopPropagation()},this.viewContainer=t,this.el=t.element.nativeElement,this.body=this.document.querySelector("body"),this.mutationThrottleTimeout=50}return t.prototype.ngOnInit=function(){!this.interactionSubscriptions&&this.enabled&&this.setup()},t.prototype.ngOnChanges=function(t){t.enabled&&(this.enabled?this.setup():this.destroy())},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.setup=function(){var e=this;if(this.interactionSubscriptions=new p.Subscription,this.optionsDefaults?this.options=new s(this.optionsDefaults).merge(this.options):this.options=new s(this.options),this.setStyle(),this.wrapContainer(),this.initGrid(),this.initBar(),this.getBarHeight(),this.initWheel(),this.initDrag(),this.options.alwaysVisible||this.hideBarAndGrid(),MutationObserver&&(this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(function(){e.mutationThrottleTimeout&&(clearTimeout(e.mutationThrottleTimeout),e.mutationThrottleTimeout=setTimeout(e.onMutation.bind(e),50))}),this.mutationObserver.observe(this.el,{subtree:!0,childList:!0})),this.scrollEvents&&this.scrollEvents instanceof n.EventEmitter){var t=this.scrollEvents.subscribe(function(t){return e.handleEvent(t)});this.interactionSubscriptions.add(t)}},t.prototype.handleEvent=function(t){if("scrollToBottom"===t.type){var e=this.el.scrollHeight-this.el.clientHeight;this.scrollTo(e,t.duration,t.easing)}else if("scrollToTop"===t.type){e=0;this.scrollTo(e,t.duration,t.easing)}else if("scrollToPercent"===t.type&&0<=t.percent&&t.percent<=100){e=Math.round((this.el.scrollHeight-this.el.clientHeight)/100*t.percent);this.scrollTo(e,t.duration,t.easing)}else if("scrollTo"===t.type){(e=t.y)<=this.el.scrollHeight-this.el.clientHeight&&0<=e&&this.scrollTo(e,t.duration,t.easing)}else"recalculate"===t.type&&this.getBarHeight()},t.prototype.setStyle=function(){var t=this.el;this.renderer.setStyle(t,"overflow","hidden"),this.renderer.setStyle(t,"position","relative"),this.renderer.setStyle(t,"display","block")},t.prototype.onMutation=function(){this.getBarHeight()},t.prototype.wrapContainer=function(){this.wrapper=this.renderer.createElement("div");var t=this.wrapper,e=this.el;this.renderer.addClass(t,"slimscroll-wrapper"),this.renderer.setStyle(t,"position","relative"),this.renderer.setStyle(t,"overflow","hidden"),this.renderer.setStyle(t,"display","inline-block"),this.renderer.setStyle(t,"margin",getComputedStyle(e).margin),this.renderer.setStyle(t,"width","100%"),this.renderer.setStyle(t,"height",getComputedStyle(e).height),this.renderer.insertBefore(e.parentNode,t,e),this.renderer.appendChild(t,e)},t.prototype.initGrid=function(){this.grid=this.renderer.createElement("div");var t=this.grid;this.renderer.addClass(t,"slimscroll-grid"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,"bottom","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.gridWidth+"px"),this.renderer.setStyle(t,"background",this.options.gridBackground),this.renderer.setStyle(t,"opacity",this.options.gridOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","99"),this.renderer.setStyle(t,"border-radius",this.options.gridBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.gridMargin),this.renderer.appendChild(this.wrapper,t)},t.prototype.initBar=function(){this.bar=this.renderer.createElement("div");var t=this.bar;this.renderer.addClass(t,"slimscroll-bar"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.barWidth+"px"),this.renderer.setStyle(t,"background",this.options.barBackground),this.renderer.setStyle(t,"opacity",this.options.barOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","100"),this.renderer.setStyle(t,"border-radius",this.options.barBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.barMargin),this.renderer.appendChild(this.wrapper,t),this.barVisibilityChange.emit(!0)},t.prototype.getBarHeight=function(){var t=this.el.offsetHeight,e=Math.max(t/this.el.scrollHeight*t,30)+"px",i=parseInt(e,10)===t?"none":"block";this.wrapper.offsetHeight!==t&&this.renderer.setStyle(this.wrapper,"height",t+"px"),this.renderer.setStyle(this.bar,"height",e),this.renderer.setStyle(this.bar,"display",i),this.renderer.setStyle(this.grid,"display",i),this.barVisibilityChange.emit("none"!==i)},t.prototype.scrollTo=function(a,l,d){var h=this,u=Date.now(),p=this.el.scrollTop,c=(this.el.offsetHeight,this.bar.offsetHeight,this.el.scrollHeight-this.el.clientHeight),g=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30),y=parseInt(this.el.style.paddingTop,10)||0,b=parseInt(this.el.style.paddingBottom,10)||0,f=function(t){var e=Date.now(),i=Math.min(1,(e-u)/l),r=m[d](i);if(0<y||0<b){var n=null;0<y&&(n=-(r*(a-(n=-y))+n),h.renderer.setStyle(h.el,"paddingTop",n+"px")),0<b&&(n=r*(a-(n=b))+n,h.renderer.setStyle(h.el,"paddingBottom",n+"px"))}else h.el.scrollTop=r*(a-p)+p;var s=h.el.scrollTop/c;if(0===b){var o=Math.round(Math.round(h.el.clientHeight*s)-g);0<o&&h.renderer.setStyle(h.bar,"top",o+"px")}i<1&&requestAnimationFrame(f)};requestAnimationFrame(f)},t.prototype.scrollContent=function(t,e,i){var r=this,n=t,s=this.el.offsetHeight-this.bar.offsetHeight,o=this.el.scrollHeight-this.el.offsetHeight,a=null;e&&(((n=parseInt(getComputedStyle(this.bar).top,10)+20*t/100*this.bar.offsetHeight)<0||s<n)&&(a=s<n?n-s:n),n=Math.min(Math.max(n,0),s),n=0<t?Math.ceil(n):Math.floor(n),this.renderer.setStyle(this.bar,"top",n+"px")),n=parseInt(getComputedStyle(this.bar).top,10)/(this.el.offsetHeight-this.bar.offsetHeight)*o,this.el.scrollTop=n,this.showBarAndGrid(),this.options.alwaysVisible||(this.visibleTimeout&&clearTimeout(this.visibleTimeout),this.visibleTimeout=setTimeout(function(){r.hideBarAndGrid()},this.options.visibleTimeout));var l=0===n,d=n===o,h=Math.ceil(n),u=new y({scrollPosition:h,isScrollAtStart:l,isScrollAtEnd:d});return this.scrollChanged.emit(u),a},t.prototype.showBarAndGrid=function(){this.renderer.setStyle(this.grid,"background",this.options.gridBackground),this.renderer.setStyle(this.bar,"background",this.options.barBackground)},t.prototype.hideBarAndGrid=function(){this.renderer.setStyle(this.grid,"background","transparent"),this.renderer.setStyle(this.bar,"background","transparent")},t.prototype.destroy=function(){if(this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.el.parentElement.classList.contains("slimscroll-wrapper")){var t=this.el.parentElement,e=t.querySelector(".slimscroll-bar");t.removeChild(e);var i=t.querySelector(".slimscroll-grid");t.removeChild(i),this.unwrap(t)}this.interactionSubscriptions&&this.interactionSubscriptions.unsubscribe()},t.prototype.unwrap=function(t){for(var e=document.createDocumentFragment();t.firstChild;){var i=t.removeChild(t.firstChild);e.appendChild(i)}t.parentNode.replaceChild(e,t)},t.prototype.onResize=function(t){this.getBarHeight()},t.decorators=[{type:n.Directive,args:[{selector:"[slimScroll]",exportAs:"slimScroll"}]}],t.ctorParameters=function(){return[{type:n.ViewContainerRef,decorators:[{type:n.Inject,args:[n.ViewContainerRef]}]},{type:n.Renderer2,decorators:[{type:n.Inject,args:[n.Renderer2]}]},{type:undefined,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]},{type:undefined,decorators:[{type:n.Inject,args:[r]},{type:n.Optional}]}]},t.propDecorators={enabled:[{type:n.Input}],options:[{type:n.Input}],scrollEvents:[{type:n.Input}],scrollChanged:[{type:n.Output,args:["scrollChanged"]}],barVisibilityChange:[{type:n.Output,args:["barVisibilityChange"]}],onResize:[{type:n.HostListener,args:["window:resize",["$event"]]}]},t}(),l=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[a],exports:[a]}]}],t}();t.SlimScrollEvent=i,t.SLIMSCROLL_DEFAULTS=r,t.SlimScrollOptions=s,t.easing=m,t.SlimScrollDirective=a,t.NgSlimScrollModule=l,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-slimscroll.umd.min.js.map